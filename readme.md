# 御魂检出器

[![Release](https://img.shields.io/badge/Release-v2.0-brightgreen.svg)]()
[![Download](https://img.shields.io/badge/Download-EXE-brightgreen.svg)](pick-dwarf-2.0.exe)

### 这是个啥，我用得上吗？

[**阴阳师**](https://yys.163.com/)游戏衍生小工具，用于检出六星满级低收益御魂（由**御魂分数**决定，即有效属性加点次数）。

如果你有在使用御魂导出器这类工具，并且游戏里好的差的满级御魂较多又纠结于弃置( 比如我)，那么这个小工具应该可以派上用场。

低收益御魂如：
```
[陆]火灵 6/15
攻击加成 55%
防御 +4
攻击 +96
生命加成 +3%
速度 +9 ...
```

### 何为御魂分数？

副属性参与评分，每条初始副属性和每次属性加点（升满15级加点5次）均视为`1`分，最高`9`分（首领御魂算上固有属性则分数更高）。而并非每`1`分都符合预期，通常先选定有效属性再评分。例：选定**攻击加成**、**速度**、**暴击**、**暴击伤害**为有效属性来评定以下这颗御魂，当有`4`分：
```
[肆]破势 6/15
攻击加成 55%
攻击 +74
速度 +2
暴击伤害 +11% ...
效果抵抗 +7% ..
```

在规则`破势-24-攻击加成：攻击加成、速度、暴击、暴击伤害，5`判定下，这颗御魂没救了。若一颗御魂评分在预期分数以下，则可视为低收益御魂了。

> 御魂分数的设定来自 NGA@YYSKernel 大佬的[这篇帖子](https://bbs.nga.cn/read.php?tid=15818432&fav=38632a10)，特此感谢。

### 规则文件

有效属性和御魂分数线由规则文件`pick-dwarf-rule.txt`决定，可自定义。

```
# 多条规则之间以换行符分隔，单条格式：
#     [御魂名]-[位置（未指定则为全部）]-[主属性（未指定则为全部）]：[有效属性名（多个用“、”隔开）]，[分数线（有效属性加点次数界限）]
# 例：
#     破势-24-攻击加成：攻击加成、速度、暴击、暴击伤害，5
#     蚌精-135：速度、效果命中，4
#     荒骷髅-135：攻击加成、速度、暴击、暴击伤害，8
#     招财猫：生命加成、防御加成、攻击加成、速度、暴击、暴击伤害、效果命中、效果抵抗，5
# 同一御魂可设定多条规则，如：
#     蚌精-135：速度、效果命中，4
#     蚌精-135：生命加成、速度、暴击、暴击伤害，5
# 若未设定规则一并采用默认规则：
#     ？？：生命加成、防御加成、攻击加成、速度、暴击、暴击伤害、效果命中、效果抵抗，5
```

此处提供一套根据我的御魂整理策略转化的规则文件：[pick-dwarf-rule.txt](pick-dwarf-rule.txt)

### 输入

+ 支持读取 NGA@火电太热 的[**御魂导出器**](https://nga.178.com/read.php?tid=15220479)导出的JSON数据文件
+ 支持读取 NGA@fluxxu 的[**痒痒熊快照**](https://nga.178.com/read.php?tid=16557282)导出的JSON数据文件

推荐使用**痒痒熊快照**，能导出更为详尽的御魂信息，比如包含**弃置**状态，藉此在筛选时可忽略已弃置的御魂。

### 发布 & 使用

「御魂检出器」同时发布到NGA论坛阴阳师板块：[https://nga.178.com/read.php?tid=18917735&_ff=538](https://nga.178.com/read.php?tid=18917735&_ff=538)，有疑问可以评论交流。

该工具以 Python3 编写，

+ 有 Python3 环境

  可直接下载 [pick-dwarf.py](pick-dwarf-2.0.py) 运行

+ 无 Python3 环境但有 Windows PC

  可下载`pick-dwarf.py`打包生成的 [pick-dwarf.exe](pick-dwarf-2.0.exe)，将**御魂导出器**或**痒痒熊快照**导出的数据文件拖到该EXE上即可，或双击运行后手动输入数据文件路径。

筛选结果会在控制台输出，同时在源数据文件目录下保存两份文件（均缀以`*-dwarf`），一份便于直接查看的TXT可读文本，另一份与源数据文件格式相同，可作后续使用，比如导入[**御魂Hub**](https://yuhunhub.tql8.com/)查看。

### 作者

「初心未改」区@**南瓜多糖**，痒痒鼠相关问题欢迎来找我讨论，代码改进或漏洞也欢迎一起交流。

![本PVE玩家有一个梦想：全图鉴六星](https://i.loli.net/2020/02/11/QgnHXcG4jZMBzp5.png)

### 更新日志

v2.0.200211
+ 调整低收益御魂判定逻辑，依据为御魂分数（何为御魂分数，可以参考 NGA@YYSKernel 大佬的[这篇帖子](https://bbs.nga.cn/read.php?tid=15818432&fav=38632a10)）
+ 增设规则文件，可自定义评定御魂分数的有效属性和分数线（提供一套根据我的御魂整理策略转化的规则文件）
+ 补充新御魂数据：兵主部、青女房、涂佛、飞缘魔

v1.4.191022
+ 支持读取「痒痒熊快照」的数据文件
+ 新增可调参数：有效属性加点次数过滤值
+ 生成的检出御魂文本文件内容经过排序（按位置、类型）
+ 修复：部分低收益御魂漏输出（有效0次加点）

v1.0.191016
+ 第一版发布
